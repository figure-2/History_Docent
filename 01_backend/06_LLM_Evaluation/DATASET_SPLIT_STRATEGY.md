# λ°μ΄ν„°μ…‹ λ¶„ν•  μ „λµ (κ³Όμ ν•© λ°©μ§€)

## β οΈ λ¬Έμ μ : λ°μ΄ν„° λ„μ(Data Leakage) μ„ν—

ν„μ¬ κ³„ν:
1. **μ„λ² λ”© λ¨λΈ μ„ μ •**: 11,140κ° μ „μ²΄ μ‚¬μ©
2. **μ„λ² λ”© λ¨λΈ νμΈνλ‹**: κ°™μ€ 11,140κ° μ‚¬μ©?
3. **λ¦¬νΈλ¦¬λ²„ ν‰κ°€**: κ°™μ€ 11,140κ° μ‚¬μ©?
4. **λ¦¬λ­μ»¤ νμΈνλ‹**: κ°™μ€ 11,140κ° μ‚¬μ©?

**λ¬Έμ **: κ°™μ€ λ°μ΄ν„°λ΅ μ„ μ • β†’ ν•™μµ β†’ ν‰κ°€λ¥Ό λ°λ³µν•λ©΄ **κ³Όμ ν•©** λ°μƒ!

---

## β… ν•΄κ²° λ°©μ•: λ°μ΄ν„°μ…‹ λ¶„ν•  μ „λµ

### κ¶μ¥ λ¶„ν•  λΉ„μ¨

```
μ „μ²΄ λ°μ΄ν„°μ…‹ (11,140κ°)
β”β”€β”€ Train Set (60%): 6,684κ°
β”‚   β””β”€β”€ νμΈνλ‹μ© (ν•™μµ)
β”β”€β”€ Validation Set (20%): 2,228κ°
β”‚   β””β”€β”€ ν•μ΄νΌνλΌλ―Έν„° νλ‹, μ΅°κΈ° μΆ…λ£
β””β”€β”€ Test Set (20%): 2,228κ°
    β””β”€β”€ μµμΆ… ν‰κ°€μ© (ν• λ²λ§ μ‚¬μ©!)
```

### μ§λ¬Έ μ ν•λ³„ κ· ν• μ μ§€

κ° μ„ΈνΈμ—μ„λ„ **keyword, context, abstract** λΉ„μ¨μ„ λ™μΌν•κ² μ μ§€:
- Train: κ° μ ν• 2,228κ°
- Validation: κ° μ ν• 743κ°
- Test: κ° μ ν• 743κ°

---

## π“‹ λ‹¨κ³„λ³„ λ°μ΄ν„°μ…‹ μ‚¬μ© μ „λµ

### 1οΈβƒ£ μ„λ² λ”© λ¨λΈ μ„ μ • (Model Selection)

**μ‚¬μ© λ°μ΄ν„°**: **Validation Set (2,228κ°)**
- μ΄μ : Test Setμ€ μµμΆ… ν‰κ°€μ©μΌλ΅ λ³΄μ΅΄
- λ©μ : μ—¬λ¬ λ¨λΈ μ¤‘ μµμ  λ¨λΈ μ„ νƒ
- ν‰κ°€ μ§€ν‘: MRR, Recall@K

**μ λ€ μ‚¬μ© κΈμ§€**: Test Set β

---

### 2οΈβƒ£ μ„λ² λ”© λ¨λΈ νμΈνλ‹ (Fine-tuning)

**ν•™μµ λ°μ΄ν„°**: **Train Set (6,684κ°)**
- λ¨λΈ ν•™μµμ— μ‚¬μ©
- Negative μƒν” μƒμ„± ν¬ν•¨

**κ²€μ¦ λ°μ΄ν„°**: **Validation Set (2,228κ°)**
- ν•™μµ μ¤‘ μ„±λ¥ λ¨λ‹ν„°λ§
- μ΅°κΈ° μΆ…λ£(Early Stopping)
- ν•μ΄νΌνλΌλ―Έν„° νλ‹

**ν‰κ°€ λ°μ΄ν„°**: **Validation Set (2,228κ°)**
- νμΈνλ‹ ν›„ μ„±λ¥ ν‰κ°€
- λ² μ΄μ¤λΌμΈκ³Ό λΉ„κµ

**μ λ€ μ‚¬μ© κΈμ§€**: Test Set β

---

### 3οΈβƒ£ λ¦¬νΈλ¦¬λ²„ ν‰κ°€ (Retriever Evaluation)

**ν‰κ°€ λ°μ΄ν„°**: **Validation Set (2,228κ°)**
- BM25, Vector, Hybrid λΉ„κµ
- μµμ  λ¦¬νΈλ¦¬λ²„ μ„ νƒ

**μ λ€ μ‚¬μ© κΈμ§€**: Test Set β

---

### 4οΈβƒ£ λ¦¬λ­μ»¤ νμΈνλ‹ (Reranker Fine-tuning)

**ν•™μµ λ°μ΄ν„°**: **Train Set (6,684κ°)**
- λ¦¬λ­μ»¤ λ¨λΈ ν•™μµ
- Negative μƒν” + Relevance Score μƒμ„±

**κ²€μ¦ λ°μ΄ν„°**: **Validation Set (2,228κ°)**
- ν•™μµ μ¤‘ μ„±λ¥ λ¨λ‹ν„°λ§
- μ΅°κΈ° μΆ…λ£

**ν‰κ°€ λ°μ΄ν„°**: **Validation Set (2,228κ°)**
- νμΈνλ‹ ν›„ μ„±λ¥ ν‰κ°€

**μ λ€ μ‚¬μ© κΈμ§€**: Test Set β

---

### 5οΈβƒ£ μµμΆ… ν‰κ°€ (Final Evaluation)

**ν‰κ°€ λ°μ΄ν„°**: **Test Set (2,228κ°) - ν• λ²λ§ μ‚¬μ©!**
- μ „μ²΄ νμ΄ν”„λΌμΈ μµμΆ… μ„±λ¥ ν‰κ°€
- RAGAS ν‰κ°€ ν¬ν•¨
- λ…Όλ¬Έ/λ³΄κ³ μ„μ— λ³΄κ³ ν•  μ„±λ¥

**μ‚¬μ© μ‹μ **: λ¨λ“  κ°λ°/νλ‹ μ™„λ£ ν›„

---

## π”„ λ°μ΄ν„°μ…‹ λ¶„ν•  μ¤ν¬λ¦½νΈ ν•„μ”

### λ¶„ν•  κΈ°μ¤€
1. **Stratified Split**: μ§λ¬Έ μ ν•λ³„ λΉ„μ¨ μ μ§€
2. **Random Seed κ³ μ •**: μ¬ν„ κ°€λ¥μ„±
3. **Chunk ID κΈ°λ°**: κ°™μ€ μ²­ν¬μ μ§λ¬Έλ“¤μ΄ λ‹¤λ¥Έ μ„ΈνΈμ— λ¶„μ‚°λμ§€ μ•λ„λ΅

### λ¶„ν•  ν›„ μƒμ„± νμΌ
```
data/
β”β”€β”€ korean_history_benchmark_balanced_11140.json (μ›λ³Έ)
β”β”€β”€ train_set_6684.json (60%)
β”β”€β”€ validation_set_2228.json (20%)
β””β”€β”€ test_set_2228.json (20%)
```

---

## π“ κ° λ‹¨κ³„λ³„ λ°μ΄ν„°μ…‹ μ‚¬μ© μ”μ•½

| λ‹¨κ³„ | Train | Validation | Test | λΉ„κ³  |
|------|-------|------------|------|------|
| 1. μ„λ² λ”© λ¨λΈ μ„ μ • | β | β… | β | ValidationμΌλ΅ μ„ μ • |
| 2. μ„λ² λ”© νμΈνλ‹ | β… ν•™μµ | β… κ²€μ¦ | β | Train ν•™μµ, Val ν‰κ°€ |
| 3. λ¦¬νΈλ¦¬λ²„ ν‰κ°€ | β | β… | β | ValidationμΌλ΅ ν‰κ°€ |
| 4. λ¦¬λ­μ»¤ νμΈνλ‹ | β… ν•™μµ | β… κ²€μ¦ | β | Train ν•™μµ, Val ν‰κ°€ |
| 5. μµμΆ… ν‰κ°€ | β | β | β… | **ν• λ²λ§ μ‚¬μ©!** |

---

## β οΈ μ£Όμμ‚¬ν•­

1. **Test Setμ€ μ λ€ μ΅°κΈ° μ‚¬μ© κΈμ§€**
   - λ¨λ“  κ°λ°/νλ‹ μ™„λ£ ν›„ μµμΆ… ν‰κ°€μ—λ§ μ‚¬μ©
   - Test SetμΌλ΅ λ¨λΈ μ„ νƒν•λ©΄ μ• λ¨!

2. **λ°μ΄ν„° λ„μ λ°©μ§€**
   - κ°™μ€ λ°μ΄ν„°λ΅ ν•™μµν•κ³  ν‰κ°€ν•μ§€ μ•κΈ°
   - Train SetμΌλ΅ ν•™μµν• λ¨λΈμ€ Validation/Testλ΅ ν‰κ°€

3. **μ¬ν„ κ°€λ¥μ„±**
   - Random seed κ³ μ •
   - λ¶„ν•  κ²°κ³Ό μ €μ¥ λ° κ³µμ 

---

## π― κ¶μ¥ μ›ν¬ν”λ΅μ°

```
1. λ°μ΄ν„°μ…‹ λ¶„ν•  (Train/Val/Test)
   β†“
2. Validation SetμΌλ΅ μ„λ² λ”© λ¨λΈ μ„ μ •
   β†“
3. Train SetμΌλ΅ μ„ νƒλ λ¨λΈ νμΈνλ‹
   β†“
4. Validation SetμΌλ΅ λ¦¬νΈλ¦¬λ²„ ν‰κ°€
   β†“
5. Train SetμΌλ΅ λ¦¬λ­μ»¤ νμΈνλ‹
   β†“
6. Validation SetμΌλ΅ μ¤‘κ°„ ν‰κ°€
   β†“
7. Test SetμΌλ΅ μµμΆ… ν‰κ°€ (ν• λ²λ§!)
```

---

## κ²°λ΅ 

**ν„μ¬ κ³„νλ€λ΅ μ§„ν–‰ν•λ©΄ κ³Όμ ν•© λ°μƒ!**

**ν•΄κ²°μ±…**: λ°μ΄ν„°μ…‹μ„ Train/Validation/Testλ΅ λ¶„ν• ν•κ³ , κ° λ‹¨κ³„μ—μ„ μ μ ν• μ„ΈνΈλ§ μ‚¬μ©

**λ‹¤μ λ‹¨κ³„**: λ°μ΄ν„°μ…‹ λ¶„ν•  μ¤ν¬λ¦½νΈ μ‘μ„± ν•„μ”


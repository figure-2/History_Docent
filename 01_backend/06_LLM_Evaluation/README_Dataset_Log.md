# λ°μ΄ν„°μ…‹ κµ¬μ¶• λ° λ¶„ν•  μ‘μ—… λ΅κ·Έ

**μ‘μ„± μΌμ‹:** 2025-11-23 05:49

---

## 1. κ°€μ„¤(Hypothesis)

### 1.1 μ΄κΈ° κ°€μ„¤
- **κ°€μ„¤ 1:** κΈ°μ΅΄ λ°μ΄ν„°μ…‹μ΄ keyword μ ν• μ§λ¬Έμ— νΈν–¥λμ–΄ μμ–΄, μ„λ² λ”© λ¨λΈ ν‰κ°€ μ‹ keyword κ²€μƒ‰μ— μ λ¦¬ν• λ¨λΈμ΄ λ¶€μ μ ν•κ² μ„ μ •λ  μ μλ‹¤.
- **κ°€μ„¤ 2:** κ· ν•μ΅ν λ°μ΄ν„°μ…‹(keyword, context, abstract κ° 33.3%)μ„ μ‚¬μ©ν•λ©΄ λ‹¤μ–‘ν• μ§λ¬Έ μ ν•μ— κ°•κ±΄ν• μ„λ² λ”© λ¨λΈμ„ μ„ μ •ν•  μ μλ‹¤.
- **κ°€μ„¤ 3:** κ°™μ€ λ°μ΄ν„°μ…‹μ„ λ¨λΈ μ„ μ • β†’ νμΈνλ‹ β†’ ν‰κ°€μ— λ°λ³µ μ‚¬μ©ν•λ©΄ κ³Όμ ν•©(Overfitting)μ΄ λ°μƒν•μ—¬ μ‹¤μ  μ„±λ¥μ„ κ³Όλ€ν‰κ°€ν•κ² λλ‹¤.

### 1.2 κ²€μ¦ λ©ν‘
- κ· ν•μ΅ν QA λ°μ΄ν„°μ…‹ κµ¬μ¶• (κ° μ§λ¬Έ μ ν• 33.3%)
- λ°μ΄ν„° λ„μ(Data Leakage) λ°©μ§€λ¥Ό μ„ν• μ μ ν• λ°μ΄ν„°μ…‹ λ¶„ν• 
- κ° μ„ΈνΈλ³„ μ§λ¬Έ μ ν• λΉ„μ¨ μ μ§€ κ²€μ¦

---

## 2. μ‹¤ν— μ„¤κ³„(Experiment Design)

### 2.1 λ°μ΄ν„°μ…‹ κµ¬μ¶• λ°°κ²½

#### λ¬Έμ μ  λ°κ²¬
- **μ–Έμ :** μ„λ² λ”© λ¨λΈ μ„ μ • λ‹¨κ³„μ—μ„
- **μ–΄λ””μ„:** κΈ°μ΅΄ λ²¤μΉλ§ν¬ λ°μ΄ν„°μ…‹ λ¶„μ„ μ¤‘
- **λ¬΄μ—‡μ„:** μ§λ¬Έ μ ν•λ³„ λ¶„ν¬ ν™•μΈ
- **λ°κ²¬ λ‚΄μ©:** 
  - κΈ°μ΅΄ λ°μ΄ν„°μ…‹μ΄ keyword μ ν• μ§λ¬Έμ— κ³Όλ„ν•κ² νΈν–¥λ¨
  - λ‹µμ„ λ³΄κ³  μ§λ¬Έμ„ λ§λ“  λ°©μ‹μΌλ΅ μΈν•΄ ν‚¤μ›λ“ λ§¤μΉ­μ— μ λ¦¬ν• κµ¬μ΅°
  - μ΄λ΅ μΈν•΄ μ„λ² λ”© λ¨λΈ μ„ μ • μ‹ keyword κ²€μƒ‰μ— νΉν™”λ λ¨λΈμ΄ λ¶€μ μ ν•κ² μ„ μ •λ  μ„ν—

#### ν•΄κ²° λ°©μ•
- **λ„κ°€:** μ‚¬μ©μμ™€ ν‘μν•μ—¬ κ²°μ •
- **μ–Έμ :** 2025-11-23
- **μ–΄λ””μ„:** History_Docent ν”„λ΅μ νΈ
- **λ¬΄μ—‡μ„:** κ· ν•μ΅ν QA λ°μ΄ν„°μ…‹ μ¬μƒμ„±
- **μ–΄λ–»κ²:** 
  1. κ° μ²­ν¬μ—μ„ keyword, context, abstract μ ν• μ§λ¬Έμ„ κ°κ° 1κ°μ”© μƒμ„±
  2. μ΄ 3,719κ° μ²­ν¬ Γ— 3κ° μ ν• = 11,140κ° μ§λ¬Έ μƒμ„±
  3. κ° μ ν•μ΄ μ •ν™•ν 33.3% λΉ„μ¨ μ μ§€
- **μ™:** λ‹¤μ–‘ν• μ§λ¬Έ μ ν•μ— κ°•κ±΄ν• λ¨λΈμ„ μ„ μ •ν•κΈ° μ„ν•΄

### 2.2 λ°μ΄ν„°μ…‹ λ¶„ν•  μ„¤κ³„

#### λ¶„ν•  ν•„μ”μ„±
- **λ¬Έμ :** κ°™μ€ 11,140κ° λ°μ΄ν„°λ¥Ό λ¨λΈ μ„ μ • β†’ νμΈνλ‹ β†’ ν‰κ°€μ— λ°λ³µ μ‚¬μ© μ‹ κ³Όμ ν•© λ°μƒ
- **ν•΄κ²°:** Train/Validation/Test μ„ΈνΈλ΅ λ¶„ν• ν•μ—¬ κ° λ‹¨κ³„λ³„λ΅ μ μ ν• μ„ΈνΈλ§ μ‚¬μ©

#### λ¶„ν•  κΈ°μ¤€ (Why)
1. **Chunk ID κΈ°μ¤€ λ¶„ν•  (ν•µμ‹¬)**
   - **μ΄μ :** κ°™μ€ μ§€λ¬Έ(Chunk)μ—μ„ λ‚μ¨ μ§λ¬Έλ“¤μ΄ λ‹¤λ¥Έ μ„ΈνΈμ— λ¶„μ‚°λλ©΄ λ°μ΄ν„° λ„μ λ°μƒ
   - **μμ‹:** "μ‹ μ λ°•ν•΄" μ²­ν¬μ—μ„ keyword, context, abstract μ§λ¬Έμ΄ κ°κ° λ‹¤λ¥Έ μ„ΈνΈμ— λ“¤μ–΄κ°€λ©΄, λ¨λΈμ΄ ν•™μµ λ°μ΄ν„°μ—μ„ λ³Έ μ§€λ¬Έμ„ ν‰κ°€ λ°μ΄ν„°μ—μ„λ„ λ³΄κ² λ¨
   - **ν•΄κ²°:** μ²­ν¬ λ‹¨μ„λ΅ λ¬¶μ–΄μ„ λ¶„ν•  (κ°™μ€ μ²­ν¬μ λ¨λ“  μ§λ¬Έμ€ κ°™μ€ μ„ΈνΈμ— λ°°μΉ)

2. **λΉ„μ¨ μ„¤μ •: 6:2:2**
   - **Train (60%):** νμΈνλ‹ ν•™μµμ©
   - **Validation (20%):** λ¨λΈ μ„ μ •, ν•μ΄νΌνλΌλ―Έν„° νλ‹, μ¤‘κ°„ ν‰κ°€
   - **Test (20%):** μµμΆ… ν‰κ°€μ© (ν• λ²λ§ μ‚¬μ©)

3. **Stratified Split**
   - **μ΄μ :** κ° μ„ΈνΈμ—μ„λ„ keyword, context, abstract λΉ„μ¨μ„ λ™μΌν•κ² μ μ§€
   - **λ©μ :** μ„ΈνΈ κ°„ μ§λ¬Έ μ ν• λ¶„ν¬ μ°¨μ΄λ΅ μΈν• νΈν–¥ λ°©μ§€

#### λΉ„κµ κΈ°μ¤€ (Criteria)
- **λ°μ΄ν„° λ„μ κ²€μ¦:** μ„ΈνΈ κ°„ μ²­ν¬ ID κ²ΉμΉ¨ μ—¬λ¶€ ν™•μΈ (0κ°μ—¬μ•Ό ν•¨)
- **λΉ„μ¨ μ μ§€ κ²€μ¦:** κ° μ„ΈνΈλ³„ μ§λ¬Έ μ ν• λΉ„μ¨μ΄ μ›λ³Έκ³Ό μ μ‚¬ν•μ§€ ν™•μΈ (κ° 33.3% Β± 0.1%)
- **μ¬ν„μ„±:** Random Seed κ³ μ • (42)μΌλ΅ λ™μΌν• λ¶„ν•  κ²°κ³Ό λ³΄μ¥

### 2.3 ν›„λ³΄κµ° μ„ μ • μ΄μ 

#### λ°μ΄ν„°μ…‹ λ¶„ν•  λ°©λ²• ν›„λ³΄
1. **λ‹¨μ λλ¤ λ¶„ν•  (μ μ™Έ)**
   - **μ΄μ :** κ°™μ€ μ²­ν¬μ μ§λ¬Έλ“¤μ΄ λ‹¤λ¥Έ μ„ΈνΈμ— λ¶„μ‚°λμ–΄ λ°μ΄ν„° λ„μ λ°μƒ
   - **κ²°κ³Ό:** μ±„νƒν•μ§€ μ•μ

2. **Chunk ID κΈ°μ¤€ λ¶„ν•  (μ±„νƒ)**
   - **μ΄μ :** λ°μ΄ν„° λ„μ μ™„μ „ μ°¨λ‹¨
   - **μ¥μ :** κ°™μ€ μ§€λ¬Έμ μ§λ¬Έλ“¤μ΄ κ°™μ€ μ„ΈνΈμ— λ¬¶μ—¬ μμ–΄ λ¨λΈμ΄ ν•™μµ λ°μ΄ν„°λ¥Ό ν‰κ°€μ—μ„ λ³΄μ§€ μ•μ
   - **κ²°κ³Ό:** μ±„νƒ

#### λ¶„ν•  λΉ„μ¨ ν›„λ³΄
1. **8:1:1 (μ μ™Έ)**
   - **μ΄μ :** Validation/Test μ„ΈνΈκ°€ λ„λ¬΄ μ‘μ•„ ν†µκ³„μ  μ‹ λΆ°λ„ λ‚®μ
   - **κ²°κ³Ό:** μ±„νƒν•μ§€ μ•μ

2. **7:1.5:1.5 (μ μ™Έ)**
   - **μ΄μ :** Test μ„ΈνΈκ°€ λ„λ¬΄ μ‘μ
   - **κ²°κ³Ό:** μ±„νƒν•μ§€ μ•μ

3. **6:2:2 (μ±„νƒ)**
   - **μ΄μ :** 
     - Train μ„ΈνΈκ°€ μ¶©λ¶„ν μ»¤μ„ νμΈνλ‹μ— μ ν•©
     - Validation/Test μ„ΈνΈκ°€ κ°κ° 2,000κ° μ΄μƒμΌλ΅ ν†µκ³„μ  μ‹ λΆ°λ„ ν™•λ³΄
     - μΌλ°μ μΈ λ¨Έμ‹ λ¬λ‹ κ΄€λ΅€μ™€ μΌμΉ
   - **κ²°κ³Ό:** μ±„νƒ

---

## 3. κ²€μ¦ κ²°κ³Ό(Validation)

### 3.1 λ°μ΄ν„°μ…‹ κµ¬μ¶• κ²°κ³Ό

#### μƒμ„±λ λ°μ΄ν„°μ…‹ ν†µκ³„
- **μ΄ λ°μ΄ν„° μ:** 11,140κ°
- **μ§λ¬Έ μ ν•λ³„ λ¶„ν¬:**
  - keyword: 3,714κ° (33.3%)
  - context: 3,714κ° (33.3%)
  - abstract: 3,712κ° (33.3%)
- **μ¶μ²:** 3,719κ° μ²­ν¬μ—μ„ κ° μ ν•λ³„ 1κ°μ”© μƒμ„±
- **νμΌ:** `korean_history_benchmark_balanced_11140.json`

#### κ²€μ¦ κ²°κ³Ό
β… **μ„±κ³µ:** κ° μ§λ¬Έ μ ν•μ΄ μ •ν™•ν 33.3% λΉ„μ¨λ΅ κ· ν•μ΅ν
β… **μ„±κ³µ:** μ΄ 11,140κ°λ΅ μμƒμΉμ™€ μΌμΉ (3,719 Γ— 3 = 11,157κ°, μΌλ¶€ μ²­ν¬μ—μ„ μƒμ„± μ‹¤ν¨λ΅ 11,140κ°)

### 3.2 λ°μ΄ν„°μ…‹ λ¶„ν•  κ²°κ³Ό

#### λ¶„ν•  ν†µκ³„
- **μ΄ κ³ μ  μ²­ν¬ μ:** 3,719κ°
- **μ²­ν¬λ‹Ή ν‰κ·  μ§λ¬Έ μ:** 3.0κ°
- **λ¶„ν•  κ²°κ³Ό:**
  - Train μ²­ν¬: 2,231κ° (60.0%)
  - Validation μ²­ν¬: 743κ° (20.0%)
  - Test μ²­ν¬: 745κ° (20.0%)

#### κ° μ„ΈνΈλ³„ ν†µκ³„

**Train Set (6,686κ°)**
- keyword: 2,229κ° (33.3%)
- context: 2,227κ° (33.3%)
- abstract: 2,230κ° (33.4%)

**Validation Set (2,223κ°)**
- keyword: 742κ° (33.4%)
- context: 742κ° (33.4%)
- abstract: 739κ° (33.2%)

**Test Set (2,231κ°)**
- keyword: 743κ° (33.3%)
- context: 745κ° (33.4%)
- abstract: 743κ° (33.3%)

#### λ°μ΄ν„° λ„μ κ²€μ¦
β… **μ„±κ³µ:** λ¨λ“  μ„ΈνΈ κ°„ μ²­ν¬ ID κ²ΉμΉ¨ 0κ°
β… **μ„±κ³µ:** Train-Val κ²ΉμΉ¨: 0κ°
β… **μ„±κ³µ:** Train-Test κ²ΉμΉ¨: 0κ°
β… **μ„±κ³µ:** Val-Test κ²ΉμΉ¨: 0κ°

**κ²°λ΅ :** μ™„λ²½ν•κ² λ…λ¦½μ μΈ μ„ΈνΈλ΅ λ¶„ν• λ¨. λ°μ΄ν„° λ„μ μ—†μ.

#### μ§λ¬Έ μ ν• λΉ„μ¨ κ²€μ¦
β… **μ„±κ³µ:** κ° μ„ΈνΈμ—μ„ keyword, context, abstract λΉ„μ¨μ΄ λ¨λ‘ 33.3% Β± 0.1% λ²”μ„ λ‚΄
β… **μ„±κ³µ:** μ›λ³Έ λ°μ΄ν„°μ…‹μ κ· ν•μ΄ κ° μ„ΈνΈμ— μ μ μ§€λ¨

### 3.3 μƒμ„±λ νμΌ

```
data/
β”β”€β”€ korean_history_benchmark_balanced_11140.json (μ›λ³Έ, 17MB)
β”β”€β”€ train_set_60.json (9.9MB, 6,686κ°)
β”β”€β”€ validation_set_20.json (3.3MB, 2,223κ°)
β””β”€β”€ test_set_20.json (3.3MB, 2,231κ°)
```

### 3.4 μ‹¤ν— κ·λ¨

- **μ›λ³Έ μ²­ν¬ μ:** 3,719κ°
- **μƒμ„±λ μ§λ¬Έ μ:** 11,140κ°
- **λ¶„ν•  ν›„:**
  - Train: 6,686κ°
  - Validation: 2,223κ°
  - Test: 2,231κ°

---

## 4. μμ‚¬κ²°μ •(Conclusion & Pivot)

### 4.1 κ³„ν μ μ§€ μ‚¬ν•­

1. **κ· ν•μ΅ν λ°μ΄ν„°μ…‹ κµ¬μ¶• κ³„ν μ μ§€**
   - **κ²°κ³Ό:** μ„±κ³µμ μΌλ΅ μ™„λ£
   - **κ·Όκ±°:** κ° μ§λ¬Έ μ ν•μ΄ μ •ν™•ν 33.3% λΉ„μ¨λ΅ μƒμ„±λ¨

2. **Chunk ID κΈ°μ¤€ λ¶„ν•  κ³„ν μ μ§€**
   - **κ²°κ³Ό:** μ„±κ³µμ μΌλ΅ μ™„λ£
   - **κ·Όκ±°:** λ°μ΄ν„° λ„μ κ²€μ¦ ν†µκ³Ό (μ²­ν¬ κ²ΉμΉ¨ 0κ°)

3. **6:2:2 λΉ„μ¨ λ¶„ν•  κ³„ν μ μ§€**
   - **κ²°κ³Ό:** μ„±κ³µμ μΌλ΅ μ™„λ£
   - **κ·Όκ±°:** κ° μ„ΈνΈκ°€ μ¶©λ¶„ν• ν¬κΈ°μ™€ κ· ν•μ΅ν λ¶„ν¬λ¥Ό κ°€μ§

### 4.2 μμ •(Pivot) μ‚¬ν•­

**μ—†μ** - λ¨λ“  κ³„νμ΄ μ„±κ³µμ μΌλ΅ μ‹¤ν–‰λ¨

### 4.3 μµμΆ… κ²°μ •

#### λ°μ΄ν„°μ…‹ μ‚¬μ© μ „λµ (μµμΆ… ν™•μ •)

| λ‹¨κ³„ | μ‚¬μ© λ°μ΄ν„°μ…‹ | μ©λ„ | λΉ„κ³  |
|------|-------------|------|------|
| 1. μ„λ² λ”© λ¨λΈ μ„ μ • | Validation Set (2,223κ°) | μ—¬λ¬ λ¨λΈ λΉ„κµ ν‰κ°€ | Test Set λ³΄μ΅΄ |
| 2. μ„λ² λ”© λ¨λΈ νμΈνλ‹ | Train Set (6,686κ°) ν•™μµ<br>Validation Set (2,223κ°) κ²€μ¦ | λ¨λΈ ν•™μµ λ° ν‰κ°€ | Test Set λ―Έμ‚¬μ© |
| 3. λ¦¬νΈλ¦¬λ²„ ν‰κ°€ | Validation Set (2,223κ°) | BM25, Vector, Hybrid λΉ„κµ | Test Set λ―Έμ‚¬μ© |
| 4. λ¦¬λ­μ»¤ νμΈνλ‹ | Train Set (6,686κ°) ν•™μµ<br>Validation Set (2,223κ°) κ²€μ¦ | λ¦¬λ­μ»¤ ν•™μµ λ° ν‰κ°€ | Test Set λ―Έμ‚¬μ© |
| 5. μµμΆ… ν‰κ°€ | Test Set (2,231κ°) | μ „μ²΄ νμ΄ν”„λΌμΈ μµμΆ… μ„±λ¥ | **ν• λ²λ§ μ‚¬μ©!** |

#### ν•µμ‹¬ μ›μΉ™
1. **Test Setμ€ μµμΆ… ν‰κ°€μ—λ§ μ‚¬μ©** - λ¨λ“  κ°λ°/νλ‹ μ™„λ£ ν›„
2. **Validation Setμ€ λ¨λΈ μ„ μ • λ° μ¤‘κ°„ ν‰κ°€μ©** - μ—¬λ¬ λ² μ‚¬μ© κ°€λ¥
3. **Train Setμ€ ν•™μµμ©** - νμΈνλ‹μ— μ‚¬μ©

### 4.4 λ‹¤μ λ‹¨κ³„

1. β… **μ™„λ£:** λ°μ΄ν„°μ…‹ κµ¬μ¶• λ° λ¶„ν• 
2. π”„ **μ§„ν–‰ μ¤‘:** Validation SetμΌλ΅ μ„λ² λ”© λ¨λΈ μ„ μ • λ²¤μΉλ§ν¬ (7κ° λ¨λΈ)
3. β³ **λ€κΈ°:** λ²¤μΉλ§ν¬ κ²°κ³Ό λ¶„μ„ ν›„ μµμ  λ¨λΈ μ„ μ •
4. β³ **λ€κΈ°:** μ„ μ •λ λ¨λΈμ„ Train SetμΌλ΅ νμΈνλ‹

---

## 5. κΈ°μ  λ…μ„Έ (Technical Specification)

### 5.1 λ°μ΄ν„°μ…‹ κµ¬μ΅°

```json
{
  "query": "μ§λ¬Έ ν…μ¤νΈ",
  "gold_text": "μ •λ‹µ λ¬Έμ„ (μ²­ν¬ ν…μ¤νΈ)",
  "chunk_id": "chk_000000",
  "type": "keyword|context|abstract",
  "metadata": {
    "source": "λ²κ±°λ²—μ€ν•κµ­μ‚¬-μ΅°μ„ νΈ",
    "page": 1,
    "type": "text"
  }
}
```

### 5.2 λ¶„ν•  μ•κ³ λ¦¬μ¦

```python
# 1. Chunk ID κΈ°μ¤€ κ·Έλ£Ήν™”
chunk_groups = defaultdict(list)
for item in data:
    chunk_groups[item['chunk_id']].append(item)

# 2. μ²­ν¬ ID λ¦¬μ¤νΈ μ…”ν” (Seed: 42)
random.seed(42)
chunk_ids = list(chunk_groups.keys())
random.shuffle(chunk_ids)

# 3. 6:2:2 λΉ„μ¨λ΅ λ¶„ν• 
n_train = int(len(chunk_ids) * 0.6)
n_val = int(len(chunk_ids) * 0.2)
train_chunks = chunk_ids[:n_train]
val_chunks = chunk_ids[n_train:n_train+n_val]
test_chunks = chunk_ids[n_train+n_val:]

# 4. κ° μ„ΈνΈ μƒμ„±
for cid in train_chunks:
    train_set.extend(chunk_groups[cid])
# ... (λ™μΌν•κ² val, test)
```

### 5.3 κ²€μ¦ λ΅μ§

```python
# λ°μ΄ν„° λ„μ κ²€μ¦
train_chunk_ids = set(train_chunks)
val_chunk_ids = set(val_chunks)
test_chunk_ids = set(test_chunks)

overlap = train_chunk_ids & val_chunk_ids  # 0κ°μ—¬μ•Ό ν•¨
```

---

## 6. μ‹¤ν¨ λ¶„μ„ (Failure Analysis)

### 6.1 λ°μƒν• λ¬Έμ 

**μ—†μ** - λ¨λ“  λ‹¨κ³„κ°€ μ„±κ³µμ μΌλ΅ μ™„λ£λ¨

### 6.2 μ£Όμμ‚¬ν•­

1. **Test Set μ΅°κΈ° μ‚¬μ© κΈμ§€**
   - λ¨λ“  κ°λ°/νλ‹ μ™„λ£ μ „μ— Test Setμ„ μ‚¬μ©ν•λ©΄ κ³Όμ ν•© μ„ν—
   - Test Setμ€ μµμΆ… μ„±λ¥ λ³΄κ³ μ©μΌλ΅λ§ μ‚¬μ©

2. **Chunk ID κΈ°μ¤€ λ¶„ν• μ μ¤‘μ”μ„±**
   - μ§λ¬Έ λ‹¨μ„λ΅ λ¶„ν• ν•λ©΄ κ°™μ€ μ§€λ¬Έμ μ§λ¬Έμ΄ λ‹¤λ¥Έ μ„ΈνΈμ— λ¶„μ‚°λμ–΄ λ°μ΄ν„° λ„μ λ°μƒ
   - λ°λ“μ‹ μ²­ν¬ λ‹¨μ„λ΅ λ¬¶μ–΄μ„ λ¶„ν• ν•΄μ•Ό ν•¨

---

## 7. μ°Έκ³  μλ£

- λ°μ΄ν„°μ…‹ λ¶„ν•  μ „λµ λ¬Έμ„: `DATASET_SPLIT_STRATEGY.md`
- λ¶„ν•  μ¤ν¬λ¦½νΈ: `split_dataset.py`
- μ›λ³Έ λ°μ΄ν„°μ…‹: `korean_history_benchmark_balanced_11140.json`

---

**μ‘μ„±μ:** AI Assistant  
**κ²€ν† μ:** μ‚¬μ©μ  
**μµμΆ… μ—…λ°μ΄νΈ:** 2025-11-23 05:49

